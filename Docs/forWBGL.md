# WBGL Goal Contracts (Measurable and Closable)

هذا الملف يحول كل نقطة إلى هدف قابل للإغلاق.

قاعدة موحدة لكل النقاط:
- `Baseline`: يقاس فعليًا على WBGL الحالي في `Wave 0` خلال أسبوعين.
- `Target`: قيمة رقمية مطلوبة بعد التنفيذ.
- `Guardrail`: شرط يحافظ على تميز WBGL (الحوكمة، التتبع، السلامة التشغيلية).
- `Stop Rule`: متى نعتبر الهدف منتهيًا رسميًا.

صيغة إلزامية مطبقة على كل نقطة بدون استثناء:
- `النقطة` -> `Metric` -> `Baseline` -> `Target` -> `Guardrail` -> `Stop Rule`

## طبقات الوزن الاستراتيجي

| Tier | المعنى | الوزن |
|---|---|---|
| T1 | Critical Controls (منع المخاطر والتلف الصامت) | 4 |
| T2 | Structural Sustainability (استدامة التطوير والصيانة) | 3 |
| T3 | Operational Throughput (السرعة وتقليل الاحتكاك اليومي) | 2 |
| T4 | UX Hygiene (تحسينات راحة وتجربة) | 1 |

## طبقات التحكم ضد تآكل الحوكمة

| Control Class | التعريف | قاعدة التعامل |
|---|---|---|
| Hard Governance | ضوابط لا تقبل التليين (صلاحيات، انتقال حالة، تدقيق، مصادقة) | أي خرق = Rollback فوري |
| Structural Governance | ضوابط استدامة تمنع الفوضى البنيوية | خرق متكرر = إيقاف الموجة |
| Workflow Safety | تبسيط مسموح بشرط عدم فتح مسارات خطأ جديدة | تجاوز العتبة = تجميد التحسين |
| User Comfort | تحسين تجربة قابل للضبط | لا يمر إذا سبب ضغطًا على الأمان |

قواعد التنفيذ الإلزامية:
- لا يبدأ تنفيذ بنود `T3` قبل إغلاق 80% من بنود `T1`.
- حد العمل المتوازي `WIP <= 3` بنود.
- أي بند يحقق `Target` لكنه يكسر `Guardrail` يعود فورًا إلى `Open`.

## جدول الأهداف

| ID | النقطة الأصلية | Metric (كيف نقيس) | Baseline | Target | Guardrail (لا نخسره) | Stop Rule | Strategic Tier | Execution Order | Control Class | Erosion Metric | Rollback Trigger |
|---|---|---|---|---|---|---|---|---|---|---|---|
| G01 | هيكل النظام أوضح وأبسط للفهم | متوسط زمن تحديد مكان التعديل لقصة صغيرة (دقائق) + عدد الوحدات المتأثرة | يقاس في Wave 0 | <= 30 دقيقة و<= 2 وحدات | عدم حذف أي نقطة حوكمة إلزامية | تحقق الهدفين لشهرين متتاليين | T2 | 10 | Structural Governance | نسبة تغييرات بدون Architecture Gate | > 2% في إصدار واحد |
| G02 | سهولة الصيانة أعلى على المدى الطويل | Lead Time لتعديل صغير (من بدء العمل حتى الدمج) | يقاس في Wave 0 | -40% من baseline | بقاء التتبع الزمني/الحدثي كاملًا | شهرين متتاليين + عدم ارتفاع حوادث ما بعد الدمج | T2 | 13 | Structural Governance | ارتفاع Post-Release Incidents بعد تبسيط الصيانة | +20% فوق baseline لشهر |
| G03 | إضافة ميزات أقل مخاطرة | Change Failure Rate (أعطال خلال 7 أيام من النشر) | يقاس في Wave 0 | <= 10% | عدم تعطيل مسارات الاسترجاع/Undo | 3 دورات إصدار متتالية | T1 | 1 | Hard Governance | ارتفاع نسبة التراجع الطارئ Rollback | > 2% في إصدار واحد |
| G04 | الكود أكثر اتساقًا | نسبة الالتزام بمعيار موحد للأنماط + مخالفات المعمارية لكل إصدار | يقاس في Wave 0 | >= 95% اتساق | عدم التضحية بالسلوك التشغيلي الحالي | 2 إصدار متتاليين | T2 | 12 | Structural Governance | تزايد مخالفات قواعد الطبقات | > 10 مخالفات حرجة في Sprint |
| G05 | فصل المسؤوليات أفضل | نسبة الميزات التي تنفذ عبر Service/Domain بدل منطق متشتت في الواجهات | يقاس في Wave 0 | >= 90% | كل تغيير حالة يبقى مسجلاً في السجل الزمني | شهرين متتاليين | T2 | 11 | Structural Governance | نسبة منطق حالة داخل UI مباشرة | > 5% من تغييرات الحالة |
| G06 | نموذج بيانات أكثر تنظيمًا | نسبة العمليات الحرجة المقروءة/المكتوبة عبر حقول Typed | يقاس في Wave 0 | >= 95% | الاحتفاظ بـ `raw_data` للأثر التاريخي | بعد تدقيق بيانات 100% بلا فقد | T1 | 2 | Hard Governance | عدم تطابق Typed مع raw_data | > 0.1% في تدقيق يومي |
| G07 | API أكثر انتظامًا | نسبة endpoints الملتزمة بعقد استجابة موحد | يقاس في Wave 0 | >= 95% | بقاء `request_id` وفحص الصلاحيات مركزيًا | 2 إصدار متتاليين | T1 | 4 | Hard Governance | Requests بدون request_id أو policy check | أي endpoint إنتاجي بدونها |
| G08 | بداية أسهل للمستخدم الجديد | زمن أول إنجاز لمعاملة صحيحة لموظف جديد بدون مساعدة | يقاس في Wave 0 | <= 20 دقيقة | عدم إلغاء ضوابط الموافقة الحرجة | نجاح >= 90% من عينة التدريب | T3 | 18 | Workflow Safety | انخفاض اكتمال خطوات الموافقة الإلزامية | < 100% لأي عينة تشغيل |
| G09 | تدريب أسرع بالبداية | ساعات التدريب حتى إنتاجية 90% | يقاس في Wave 0 | -40% من baseline | عدم ارتفاع معدل الأخطاء التشغيلية | تحقق الهدف لدورتين تدريب متتاليتين | T3 | 20 | Workflow Safety | معدل أخطاء المتدرب بعد التبسيط | +15% فوق baseline لدورة |
| G10 | حمل ذهني أقل يوميًا | درجة حمل ذهني (استبيان 1-5) + نقاط التردد لكل معاملة | يقاس في Wave 0 | <= 2.5/5 و-30% تردد | لا توجد تغيرات حالة غير موثقة | شهرين متتاليين | T3 | 22 | Workflow Safety | نسبة تغييرات حالة بلا تعليق سبب | > 0.5% أسبوعيًا |
| G11 | تنقل أسهل للمستخدم غير التقني | معدل الضياع الملاحي (Navigation Backtracks) + زمن الوصول للشاشة المطلوبة | يقاس في Wave 0 | <= 5% و<= 10 ثوان | ظهور الحالة الحالية للمعاملة بوضوح دائم | 8 أسابيع مستقرة | T3 | 24 | Workflow Safety | اختفاء مؤشر الحالة من الشاشات الحرجة | أي شاشة حرجة بدون حالة واضحة |
| G12 | مناسب لاعتماد سريع وتشغيل خفيف | نسبة الإنجاز المستقل لغير التقنيين بدون تدخل دعم | يقاس في Wave 0 | >= 90% | بقاء حدود الصلاحيات كما هي أو أقوى | تحقق الهدف خلال شهرين | T3 | 26 | Workflow Safety | زيادة محاولات الوصول غير المصرح | +10% فوق baseline لشهر |
| G13 | إدارة الإسناد والمهام أوضح | نسبة السجلات الجاهزة المسندة + استخدام صندوق "مهامي" | يقاس في Wave 0 | >= 95% إسناد و>= 85% استخدام | عدم كشف مهام خارج صلاحية المستخدم | شهرين متتاليين | T3 | 15 | Workflow Safety | ظهور مهام خارج scope الدور | أي حادثة RBAC مؤكدة |
| G14 | إدارة الحساب الشخصي أوضح | نسبة نجاح تغيير كلمة المرور/التفضيلات من أول محاولة | يقاس في Wave 0 | >= 98% | عدم تخفيف سياسة الأمان | 8 أسابيع بدون ارتفاع تذاكر الحساب | T4 | 29 | User Comfort | ضعف إعدادات كلمة المرور القوية | أي قبول لكلمة أقل من policy |
| G15 | إحساس أسرع وأبسط في أحجام صغيرة-متوسطة | P50 وP90 لزمن إتمام المعاملة | يقاس في Wave 0 | P50 -30% وP90 -40% | اكتمال سجل التدقيق 100% | شهرين متتاليين | T3 | 28 | Workflow Safety | تقليل logging لتسريع الأداء | أي نقص في audit completeness |
| G16 | بداية الاستخدام أسهل للمستخدم الجديد | درجة ثقة المستخدم بعد أول يوم (1-5) | يقاس في Wave 0 | >= 4/5 | لا اختصارات تتجاوز الحوكمة | دورتين onboarding متتاليتين | T3 | 19 | Workflow Safety | اعتماد المستخدم على bypass path | > 1 bypass لكل 100 معاملة |
| G17 | تدريب الموظفين الجدد أسرع | زمن معالجة 10 معاملات بشكل مستقل | يقاس في Wave 0 | <= يوم عمل واحد | معدل خطأ المتدرب لا يزيد عن baseline | دورتين تدريب متتاليتين | T3 | 21 | Workflow Safety | أخطاء حالة حرجة أثناء التدريب | أي خطأ يؤدي حالة غير صالحة |
| G18 | حمل ذهني أقل بالمهام اليومية | عدد القرارات اليدوية لكل معاملة | يقاس في Wave 0 | -35% من baseline | قرارات الحوكمة الإلزامية تبقى كما هي | شهرين متتاليين | T3 | 23 | Workflow Safety | حذف قرار إلزامي من التدفق | أي حذف لقرار حوكمي |
| G19 | الشاشات والتدفق أبسط | عدد النقرات في الرحلة الأساسية | يقاس في Wave 0 | -35% | عدم إخفاء إجراءات حرجة خلف مسارات غامضة | 8 أسابيع مستقرة | T3 | 25 | Workflow Safety | تنفيذ إجراء حرج بنقرة غير مؤكدة | أي إجراء حرج بدون تأكيد مناسب |
| G20 | توزيع المهام أوضح عبر assigned_to | توازن توزيع المهام بين الفريق + نسبة المهام غير المسندة >24 ساعة | يقاس في Wave 0 | انحراف التوزيع <= 20% و<= 2% غير مسندة | كل تعديل إسناد يسجل تدقيقيًا | شهرين متتاليين | T3 | 16 | Workflow Safety | تعديلات إسناد بدون audit event | > 0 حدث شهريًا |
| G21 | only_my_tasks يساعد على التركيز | عدد تبديل السياق بالساعة + زمن استعادة مهمة غير مكتملة | يقاس في Wave 0 | <= 3 تبديلات/ساعة و<= 2 دقيقة استعادة | بقاء إمكانيات البحث الشامل للمشرفين | شهرين متتاليين | T3 | 17 | Workflow Safety | اختفاء أدوات الإشراف من المشرف | أي فقدان لصلاحية إشراف معتمدة |
| G22 | إدارة الملف الشخصي/كلمة المرور أوضح | عدد تذاكر الدعم الشهرية المتعلقة بالحساب | يقاس في Wave 0 | <= 2 تذكرة/شهر | عدم تخفيف ضوابط المصادقة | شهرين متتاليين | T4 | 30 | User Comfort | زيادة حوادث القفل أو الاستيلاء على حساب | أي Incident أمني عالي الشدة |
| G23 | نموذج بيانات منظم بحقوق صريحة | نسبة عمليات القراءة المعتمدة على الحقول المنظمة | يقاس في Wave 0 | >= 90% | تطابق كامل مع payload التاريخي | تدقيق تطابق بيانات 100% | T1 | 3 | Hard Governance | قراءة قرار تشغيلي من مصدر غير معتمد | > 1 حالة مؤكدة في شهر |
| G24 | اتساق API أعلى للتكامل | عدد أخطاء التكامل بسبب عدم اتساق العقود | يقاس في Wave 0 | <= 2 خطأ/Iteration | دعم توافق خلفي مرحلي حتى cutover | 2 إصدارات متتالية | T1 | 5 | Hard Governance | كسر توافق خلفي بدون Deprecation window | أي كسر غير معلن |
| G25 | التحقق من المدخلات موحد | نسبة endpoints الكتابية التي تستخدم طبقة تحقق موحدة | يقاس في Wave 0 | = 100% | تسجيل كل reject لسبب واضح | 2 إصدارات متتالية | T1 | 6 | Hard Governance | كتابة بيانات بدون validator | أي endpoint كتابة بدون validator |
| G26 | رسائل الأخطاء أكثر قابلية للتوقع | نسبة الأخطاء التي تحتوي "سبب + إجراء مقترح" | يقاس في Wave 0 | >= 95% | عدم تسريب بيانات حساسة في الرسائل | شهرين متتاليين | T3 | 27 | Workflow Safety | تسريب PII أو stack traces في الرسائل | أي تسريب مثبت |
| G27 | إدارة الصلاحيات والأدوار أكثر مباشرة | نسبة قرارات السماح/المنع القابلة للتفسير عبر policy matrix | يقاس في Wave 0 | = 100% | مبدأ `deny-by-default` دائم | شهرين متتاليين | T1 | 7 | Hard Governance | قواعد صلاحية خارج policy matrix | أي rule غير موثقة |
| G28 | المصادقة أنظف في الاستخدام اليومي | معدل مشاكل الجلسات/التوكن للمستخدمين | يقاس في Wave 0 | < 1% من المستخدمين/شهر | بقاء CSRF/Session Security/Headers مفعلة | شهرين متتاليين | T1 | 8 | Hard Governance | تعطيل عناصر CSRF أو Session hardening | أي تعطيل في بيئة إنتاج |
| G29 | قابلية الصيانة المستقبلية أعلى | Cycle Time لتعديل متوسط + نسبة إعادة فتح نفس العطل | يقاس في Wave 0 | -35% و<= 10% reopen | عدم تقليل تغطية الاختبارات عن baseline | 3 دورات تطوير متتالية | T2 | 14 | Structural Governance | انخفاض تغطية الاختبارات أو زيادة reopen | تغطية -5 نقاط أو reopen > 10% |
| G30 | أثر التعديلات أكثر قابلية للتنبؤ | متوسط عدد الملفات/الوحدات المتأثرة لكل تغيير + rollback rate | يقاس في Wave 0 | <= 8 ملفات و<= 2.5 وحدات و<= 2% rollback | لا تغيير بدون أثر تدقيقي | 3 إصدارات متتالية | T1 | 9 | Hard Governance | تغيير إنتاجي بدون change record مكتمل | أي تغيير بلا change record |

## بروتوكول الإغلاق الرسمي
- لا تعتبر أي نقطة منتهية بدون قياس baseline أولًا.
- لا تعتبر أي نقطة منتهية إذا حققت target وكَسرت guardrail.
- لا يعتبر أي تحسين تبسيطي صالحًا إذا فعّل `Rollback Trigger`.
- الإغلاق النهائي للبرنامج يتطلب إغلاق G01..G30 كلها.
