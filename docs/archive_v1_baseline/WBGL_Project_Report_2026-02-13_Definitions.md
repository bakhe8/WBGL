# WBGL — Definitions & Terminology Annex

**التاريخ:** 2026-02-13  
**الإصدار:** Definitions & Terminology  
**الغرض:** توحيد المصطلحات التشغيلية ومنع تضارب التفسير.

---

## 1) Action (إجراء)

عملية تشغيلية مقصودة ينفذها المستخدم يدويًا.  
الإجراءات المعتمدة حاليًا: **تمديد / تخفيض / إفراج**.

---

## 2) Event (حدث)

أي واقعة تشغيلية تُسجل في Timeline، سواء ناتجة عن إجراء يدوي أو نتيجة آلية.

---

## 3) State Transition (انتقال حالة)

انتقال حالة الضمان، وقد يكون:
- آليًا: مثل `Needs Review → Ready`.
- يدويًا: مثل `Ready → Released`.

---

## 4) Snapshot

نسخة كاملة من كيان الضمان محفوظة قبل تنفيذ أي حدث، وتشمل بيانات الكيان وعلاقاته التشغيلية اللازمة لعرض الحالة السابقة.

---

## 5) Duplicate Import (استيراد مكرر)

محاولة إدخال ضمان موجود مسبقًا.  
في التنفيذ الحالي تُسجل كحدث في Timeline عبر مساري Excel وSmart Paste دون إنشاء كيان جديد لنفس رقم الضمان ودون تعديل المسار التاريخي الأساسي للضمان.

---

## 6) Reject & Ignore (رفض وتجاهل)

رفض الطلب دون إنشاء سجل جديد.  
تستخدم هذه الحالة عندما لا تتحقق شروط قبول الإدخال (مثل نقص الحقول الإلزامية أو طلب إنشاء بيانات اختبار أثناء تفعيل Production Mode أو تكرار رقم الضمان في الإدخال اليدوي).

---

## 7) Single Source of Truth (Letters)

مصدر واحد معتمد لتوليد الخطابات فقط، ويتمثل في:
- خدمة البناء: `app/Services/LetterBuilder.php`
- القالب: `templates/letter-template.php`

هذا المفهوم في هذا الملحق يطبق على مكون الخطابات فقط، ولا يوسّع تلقائيًا على بقية مكونات النظام.

---

## 8) Timeline Record

سجل الحدث داخل Timeline مع بيانات الحدث (النوع/الوقت/المصدر) وربطه بالـSnapshot السابق للحدث.

---

## 9) Production Mode

نمط تشغيل يمنع إدخال بيانات اختبار جديدة ويستبعد بيانات الاختبار من القراءة التشغيلية، دون حذف تلقائي للبيانات من قاعدة البيانات.

---

## 10) Master Data (البيانات المرجعية)

بيانات البنوك والموردين المعتمدة في النظام، والتي تستخدم كمرجع للمطابقة والإدخال.

---

## 11) Notes & Attachments

بيانات توثيقية إضافية مرتبطة بالضمان (ملاحظات أو ملفات مرفقة) وتستخدم في المتابعة والمراجعة.

---

## 12) Letter Output (مخرج الخطاب)

المستند الرسمي الناتج عن النظام لكل إجراء تشغيلي وفق نموذج ثابت وبنية موحدة.
