# ุงููุฑุญูุฉ ุงูุฎุงูุณุฉ - ุฎุทุฉ ุงูุฅุตูุงุญ ุงูุดุงููุฉ (Consolidated Remediation Plan)

## ุงูุชุงุฑูุฎ: 2026-02-11

---

## ๐ฏ ููุฏูุฉ

ุจูุงุกู ุนูู ูุชุงุฆุฌ ุงูุชุฏููู ุงูุดุงูู (ุงููุฑุงุญู 0-4)ุ ุชู ุฅุนุฏุงุฏ ูุฐู ุงูุฎุทุฉ ูุชุฑููุฉ ูุธุงู WBGL ูู "ูููุฐุฌ ุฃููู ููู" ุฅูู "ูุธุงู ูุณุชูุฑ ูุขูู" ูุงุจู ููุตูุงูุฉ. ุชู ุชุฑุชูุจ ุงูุฅุตูุงุญุงุช ุจูุงุกู ุนูู ุงูุฃููููุฉ (ูู ุงูุฃุนูู ุฅูู ุงูุฃุฏูู).

---

## ๐ ูุงุฆูุฉ ุงูุฅุตูุงุญุงุช ุฐุงุช ุงูุฃููููุฉ (Top 10 Fixes)

### 1๏ธโฃ ุชุฃููู ุงููุตูู ูููููุงุช ุงูุญุณุงุณุฉ (ุฃููููุฉ ูุตูู - ุฃูู)

- **ุงููุตู:** ููุน ุงููุตูู ุงููุจุงุดุฑ ููุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูุณุฌูุงุช ุนุจุฑ ุงููุชุตูุญ.
- **ุงูุฅุตูุงุญ:** ุชุนุฏูู `server.php` ูููุน ุชูููุฐ ุงูุทูุจุงุช ุงูุชู ุชุณุชูุฏู ูุฌูุฏ `storage`.
- **ูุนูุงุฑ ุงููุจูู:** ูุญุงููุฉ ุงููุตูู ูู `/storage/database/app.sqlite` ุชุฑุฌุน ุฎุทุฃ 403 ุฃู 404.

### 2๏ธโฃ ูุนุงูุฌุฉ ุซุบุฑุฉ CSRF ูู ุงูู APIs (ุฃููููุฉ ูุตูู - ุฃูู)

- **ุงููุตู:** ุญูุงูุฉ ุนูููุงุช ุญูุธ ุงููุฑุงุฑุงุช ูู ุงููุฌูุงุช ุงูุนุงุจุฑุฉ ููููุงูุน.
- **ุงูุฅุตูุงุญ:** ุฅุถุงูุฉ CSRF Token ุจุณูุท ูุนูููุงุช POST ูู `index.php` ูุงูุชุญูู ููู ูู `api/save-and-next.php`.
- **ูุนูุงุฑ ุงููุจูู:** ุฑูุถ ุฃู ุทูุจ POST ูุง ูุญุชูู ุนูู Token ุตุงูุญ.

### 3๏ธโฃ ุชูููู ูุฆุฉ God Class ูู `index.php` (ุฃููููุฉ ุนุงููุฉ - ููุฏุณุฉ)

- **ุงููุตู:** ุงูููู ูุญุชูู ุนูู ุฃูุซุฑ ูู 1000 ุณุทุฑ ููููู ุจูู ุดูุก.
- **ุงูุฅุตูุงุญ:** ุงุณุชุฎุฑุงุฌ ููุทู ุงูููุชุฑุฉ ูุงูุจุญุซ ุฅูู `App\Services\SearchService` ูููุทู ุงูุนุฑุถ ุฅูู `templates`.
- **ูุนูุงุฑ ุงููุจูู:** ุชูููุต ุญุฌู `index.php` ุฅูู ุฃูู ูู 300 ุณุทุฑ ูุชูุฒูุน ุงูููุงู.

### 4๏ธโฃ ุฅุฒุงูุฉ ุงูุญุงูุฉ ุงูุนุงูููุฉ (Global State) ูู `StatusEvaluator` (ุฃููููุฉ ุนุงููุฉ - ููุฏุณุฉ)

- **ุงููุตู:** ุงูุงุนุชูุงุฏ ุนูู `global $db`.
- **ุงูุฅุตูุงุญ:** ุชุญููู ุงูุฏุงูุฉ `evaluateFromDatabase` ูุชูุจู ูุงุฆู `$db` ุนุจุฑ ุญูู ุงูุชุจุนูุฉ (Dependency Injection).
- **ูุนูุงุฑ ุงููุจูู:** ุฅุฒุงูุฉ ูููุฉ `global` ูู ุงูููุฏ ุชูุงูุงู.

### 5๏ธโฃ ูุนุงูุฌุฉ ุงูุฏููู ุงูุชูููุฉ ูู ูุณุงุญุงุช ุงูุฃุณูุงุก (ุฃููููุฉ ูุชูุณุทุฉ - ูุธุงูุฉ ููุฏ)

- **ุงููุตู:** ูุฌูุฏ ููุฏ ููุฑุฑ/ุงูุชูุงูู ูู `Suggestions` ู `SmartPaste`.
- **ุงูุฅุตูุงุญ:** ุฏูุฌ ูุฐู ุงูุฎุฏูุงุช ูููุงู ุฏุงุฎู `App\Services\Learning` ูุญุฐู ุงููุฌูุฏุงุช ุงููุฏููุฉ.
- **ูุนูุงุฑ ุงููุจูู:** ุงูุชุฎูุต ูู ุชุญุฐูุฑุงุช `@deprecated` ูุงุณุชุฎุฏุงู ูุณุงุฑ ุจุฑูู ูุงุญุฏ.

### 6๏ธโฃ ุชุญุณูู ุชุฌุฑุจุฉ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก (ุฃููููุฉ ูุชูุณุทุฉ - UX)

- **ุงููุตู:** ุงุณุชุฎุฏุงู `die()` ูููู ุงููุธุงู ุจุดูู ูุฌ ูุบูุฑ ูููู.
- **ุงูุฅุตูุงุญ:** ุงุณุชุจุฏุงู `die()` ุจู `Exception Handling` ูุนุฑุถ ุตูุญุฉ ุฎุทุฃ ุตุฏููุฉ ูููุณุชุฎุฏู.
- **ูุนูุงุฑ ุงููุจูู:** ุธููุฑ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ ุฏุงุฎู ุชุตููู ุงููุธุงู ุนูุฏ ูุดู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช.

### 7๏ธโฃ ุฅุถุงูุฉ ูุธูุฉ ุญูุงูุฉ ูู Unit Tests (ุฃููููุฉ ูุชูุณุทุฉ - ููุซูููุฉ)

- **ุงููุตู:** ุบูุงุจ ูุงูู ููุงุฎุชุจุงุฑุงุช ุงูุขููุฉ.
- **ุงูุฅุตูุงุญ:** ุฅูุดุงุก ุฃูู 5 ุงุฎุชุจุงุฑุงุช ุฃุณุงุณูุฉ ูุฎุฏูุงุช `ImportService` ู `StatusEvaluator`.
- **ูุนูุงุฑ ุงููุจูู:** ูุฌุงุญ ุชุดุบูู `vendor/bin/phpunit` ุนูู ุงูุงุฎุชุจุงุฑุงุช ุงูุฌุฏูุฏุฉ.

### 8๏ธโฃ ุญุฐู ุงูููุฏ ุงูููุช (ุฃููููุฉ ููุฎูุถุฉ - ูุธุงูุฉ ููุฏ)

- **ุงููุตู:** ูุฆุงุช ูุซู `RecordHydratorService` ูุง ุชุณุชุฎุฏู.
- **ุงูุฅุตูุงุญ:** ุญุฐู ุฌููุน ุงููุฆุงุช ูุงููููุงุช ุงูุชู ุฃุซุจุช ุงูุชุฏููู ุนุฏู ุงุณุชุฎุฏุงููุง.
- **ูุนูุงุฑ ุงููุจูู:** ุชูููู ุญุฌู ุงููุฌูุฏ `app/Services` ูุน ุจูุงุก ูู ุงููุธุงุฆู ุณูููุฉ.

### 9๏ธโฃ ุชุญุณูู ุฃุฏุงุก ููุญุฉ ุงูุฅุญุตุงุฆูุงุช (ุฃููููุฉ ููุฎูุถุฉ - ุฃุฏุงุก)

- **ุงููุตู:** ุชูููุฐ ุนุดุฑุงุช ุงูุงุณุชุนูุงูุงุช ุงูุซูููุฉ ุนูุฏ ูู ุชุญููู ูุตูุญุฉ `statistics.php`.
- **ุงูุฅุตูุงุญ:** ุชุทุจูู ูุธุงู ุชุฎุฒูู ูุคูุช (Simple File Cache) ููุชุงุฆุฌ ุงูุฅุญุตุงุฆูุงุช ุฃู ุชุญููููุง ูุงุณุชุนูุงูุงุช ุฎูููุฉ (AJAX).
- **ูุนูุงุฑ ุงููุจูู:** ููุช ุชุญููู ุงูุตูุญุฉ ุฃูู ูู 500ms.

### ๐ ุฅุถุงูุฉ ุญูุงูุฉ Basic Auth (ุฃููููุฉ ููุฎูุถุฉ - ุฃูู)

- **ุงููุตู:** ุงููุธุงู ููุชูุญ ุชูุงูุงู ูุฃู ูุณุชุฎุฏู ูุญูู.
- **ุงูุฅุตูุงุญ:** ุฅุถุงูุฉ ุชุญูู ุจุณูุท ูู ูููุฉ ูุฑูุฑ ูุงุญุฏุฉ (Single Password) ูู `index.php`.
- **ูุนูุงุฑ ุงููุจูู:** ุทูุจ ูููุฉ ูุฑูุฑ ูุจู ุงูุณูุงุญ ุจุนุฑุถ ุฃู ุจูุงูุงุช.

---

## ๐ ุฎุทุฉ ุงูุชูููุฐ ุงูููุชุฑุญุฉ (Next Steps)

1. **ุงูููุฌุฉ ุงูุฃููู (ุฃุณุจูุน 1):** ุฅุตูุงุญุงุช ุงูุฃูุงู (1, 2, 10).
2. **ุงูููุฌุฉ ุงูุซุงููุฉ (ุฃุณุจูุน 2):** ุงูุชุฌุฏูุฏ ุงูููููู (3, 4, 8).
3. **ุงูููุฌุฉ ุงูุซุงูุซุฉ (ุฃุณุจูุน 3):** ุฌูุฏุฉ ุงูููุฏ ูุงูููุซูููุฉ (5, 6, 7, 9).

---

**โ ุจูุฐุง ููุชูู ุงูุชุฏููู ุงูุดุงูู ููุธุงู WBGL. ุดูุฑุงู ูู!**
